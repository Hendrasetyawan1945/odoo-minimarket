<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="pembelian_view_tree" model="ir.ui.view">
        <field name="name">pembelian_view_tree</field>
        <field name="model">minimarket.pembelian</field>
        <field name="arch" type="xml">
            <tree string="pembelian_tree">
                <!-- <field name="no_masuk_ids"/> -->
                <field name="kode_pemasok" />
                <field name="tgl_masuk"/>
                <field name="kode_spec"/>
                <field name="kode_provinsi"/>
                <field name="kode_keteranganasal"/>
                <field name="total"/>
                <!-- <field name="user_id"/> -->
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="pembelian_view_form" model="ir.ui.view">
        <field name="name">pembelian_view_form</field>
        <field name="model">minimarket.pembelian</field>
        <field name="arch" type="xml">
            <form string="pembelian_form">
            <header>
            <button string="Confirm" name="action_confirm" type="object" states="draf" /> <!--Untuk merubah menjadi confim -->
            <button string="Done" name="action_done" type="object" states="confirm"/>
            <button string="Cancel" name="action_cancel" type="object" confirm="Apakah anda akan membatalkan pembelian?" states="confirm,done" />
            <button string="Draf" name="action_draf" type="object" confirm="Apakah yakin anda akan mengembalikan transaksi ini ke draf ?" states="cancel"/> 

            <field name="state" widget="statusbar" statusbar_visible="draf,confirm,done"/>
            </header>
                <sheet> 
                    <group string="Daftar Keterangan Pemasok">
                        <!-- <field name="no_masuk_ids"/> -->
                        <field name="kode_pemasok" attrs="{'readonly' : [('state','!=',('draf'))]}"/>
                        <field name="tgl_masuk" attrs="{'readonly' : [('state','!=',('draf'))]}"/>
                        <field name="kode_spec" attrs="{'readonly' : [('state','!=',('draf'))]}"/>
                        <field name="kode_provinsi" attrs="{'readonly' : [('state','!=',('draf'))]}"/>
                        <field name="kode_keteranganasal" attrs="{'readonly' : [('state','!=',('draf'))]}"/>
                        <field name="total" attrs="{'readonly' : [('state','!=',('draf'))]}"/>
                        <!-- <field name="user_id"/> -->
                    </group>
                    <notebook colspan='8'>
                        <page name="name" string="No Nota Pembelian || Daftar Beli">
                            <field name="no_masuk_ids">
                            <tree editable='bottom'>
                                <field name="kode_barang_ids"/>  
                                <field name="nama_barangpembelian"/> 
                                <field name="harga_beli"/> 
                                <field name="jumlah" sum="Jumlah" />   
                                <field name="subtotal" sum="Totalsemua"/>                                     
                            </tree>
                            </field>                                                
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="pembelian_action" model="ir.actions.act_window">
        <field name="name">Pembelian</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">minimarket.pembelian</field>
        <field name="view_mode">tree,form</field>
    </record>
    <!-- This Menu Item must have a parent and an action -->
    <menuitem id="pembelian_categ"
            name="pembelian"
            parent="minimarket_root" 
            action="pembelian_action"
            sequence="30"/>
</odoo>